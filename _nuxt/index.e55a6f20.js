import{_ as Z}from"./BaseInput.vue.1eeec81c.js";import{_ as ee}from"./BaseButton.dc25a8df.js";import{_ as te}from"./BasePlaceholderPage.vue.162b9e84.js";import{_ as se}from"./BaseHeading.vue.be3be9e2.js";import{_ as ae}from"./nuxt-link.afaa3c10.js";import{_ as oe}from"./BaseCard.vue.01d31acf.js";import{_ as le}from"./TairoContentWrapper.vue.11bec812.js";import{d as ne,P as re,Q as ce,c as P,r as a,y as ie,o as v,a as x,b as n,w as o,j as k,i as e,e as ue,S as F,F as L,G as C,f as V,t as y}from"./entry.e53b877c.js";import{u as de}from"./toaster.fe980440.js";import{_ as me,a as fe}from"./placeholder-search-6-dark.e7f593aa.js";import{L as pe}from"./index.59421564.js";import"./buttons.df1f97f3.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.d575ab7e.js";import"./index.fcd946b3.js";import"./input-id.78e3b95a.js";const _e={key:0},ge=e("img",{class:"block dark:hidden",src:me,alt:"Placeholder image"},null,-1),he=e("img",{class:"hidden dark:block",src:fe,alt:"Placeholder image"},null,-1),ve={key:1},ye=e("hr",{class:"border-gray-400 py-2"},null,-1),we={class:"ltablet:grid-cols-4 grid w-full gap-4 sm:grid-cols-3 lg:grid-cols-4"},xe={class:"relative"},ke=["src"],be={class:"flex items-center justify-between mb-2 mt-3 px-2"},Ne={class:"bg-muted-500/20 rounded-full text-xs text-muted-500 p-2"},Ae={class:"mt-auto flex items-center gap-2"},Ie={class:"leading-none"},Se={class:"text-muted-800 dark:text-muted-100 font-sans text-sm font-medium leading-tight"},Ee=e("span",null,"Send",-1),Te=e("div",{class:"mt-6"},null,-1),qe=e("hr",{class:"border-gray-400 py-2"},null,-1),Oe=e("div",null,null,-1),$e={class:"ltablet:grid-cols-4 grid w-full gap-4 sm:grid-cols-3 lg:grid-cols-4"},je={class:"relative"},Be=["src"],De={class:"flex items-center justify-between mb-2 mt-3 px-2"},Pe={class:"bg-muted-500/20 rounded-full text-xs text-muted-500 p-2"},Fe={class:"mt-auto flex items-center gap-2"},Le={class:"leading-none"},Ce={class:"text-muted-800 dark:text-muted-100 font-sans text-sm font-medium leading-tight"},Ve=e("span",null,"Send",-1),ot=ne({__name:"index",setup(ze){const w=new pe,z=re();ce();const b=de(),G=P(()=>parseInt(z.query.page??"1")),A=a(""),J=a(12);a(""),a([]);var q=a([]),O=a([]);a([]),a([]),a([]),a([]);const m=a([]);var U={};a([]),a({});var I=[],p=a({});P(()=>({filter:A.value,perPage:J.value,page:G.value})),a(""),a("");var N=a([]);const W=a([]),S=a([{propertyid:"",tokens:[{tokenstart:"",tokenend:"",amount:""}]}]);var E=a(!0);async function R(l){try{const t=localStorage.getItem("gen_wallet_Name");await w.walletDetails(t).then(r=>{r.message.includes("Requested wallet does not exist or is not loaded")?w.loadWallet(t).then(s=>{console.log("this is the response of a loaded wallet ",s.message),l()}):l()}).catch(()=>{console.log("catch error")})}catch(t){console.log(t)}}a([]);const H=()=>{console.log("unique nwa--->",m.value);var l="";setTimeout(()=>{l=localStorage.getItem("nftData")},3e3),m.value.length===0?$():(E.value=!1,m.value=JSON.parse(l),console.log("this guysss",m.value),$(),console.log("This is AllUniqueNFTs",m.value))};function $(){R(M),console.log("checked loaded")}async function M(){const l=localStorage.getItem("gen_wallet_Name");try{w.walletAddresses(l).then(t=>{t.successful?(t.data.forEach(r=>{N.value.push(r.address),console.log("what",N.value)}),N.value.forEach(r=>{Q(r)})):console.log("error prone",t.message)})}catch(t){console.log(t)}}const Q=async l=>{try{console.log("walletttt",N.value),w.addressNfts(l).then(t=>{t.successful?(S.value=t.data,Y()):(b.clearAll(),b.show({title:"Error",message:t.message,color:"danger",icon:"user-circle-fill",closable:!0}))})}catch(t){console.log(t)}},K=()=>{let l=q.value.map(t=>{const r={method:"GET"};return fetch(`https://liaas20240129020448.azurewebsites.net/api/Explorer/propertyId?propertyId=${t}`,r).then(s=>s.json()).then(s=>{if(s.successful)return s.data}).catch(s=>console.error(s))});Promise.all(l).then(t=>{let r=t.filter(s=>s!==void 0);r&&r.length?(I=r.reduce((s,_)=>{if(_.category==="SDA21"){const c=m.value.filter(i=>(i==null?void 0:i.nft.propertyId)===_.propertyid);return[...s,...c]}return s},[]),console.log("EventsArray:",I)):console.log("No data available.")})};async function X(){O.value.push(I),console.log("eventss",O.value)}const Y=async()=>{console.log("hi there again what",S.value),S.value.forEach(async l=>{const t=parseInt(l.propertyid),r=l.tokens;for(const c of r){const i=parseInt(c.tokenstart),g=parseInt(c.tokenend);try{const h=await w.nftDetails(i,g,t);if(h.successful){const u=new Set,d={};var s=a("");h.data.forEach((f,T)=>{if(s=JSON.parse(f.grantdata).name,s in d?d[s]++:d[s]=1,!u.has(s)){u.add(s);const B={},D=`object_${T}`;B[D]=JSON.parse(f.grantdata),p.value[D]=JSON.parse(f.grantdata),W.value.push(B)}}),U=d;for(const f in p.value)if(Object.hasOwnProperty.call(p.value,f)){const T=p.value[f].name,j=d[T];E.value=!1,m.value.push({nftAmount:j,nft:{name:p.value[f].name,image:p.value[f].image,description:p.value[f].description,attributes:p.value[f].attributes,propertyId:t,tokenStart:i,tokenEnd:g}})}localStorage.setItem("nftData",JSON.stringify(m.value))}else b.clearAll(),b.show({title:"Error",message:h.data.value.message,color:"danger",icon:"user-circle-fill",closable:!0})}catch(h){console.log(h)}}let _=a([]);for(let c=0;c<m.value.length;c++){let i=m.value[c];_.value.push(i.nft.propertyId)}q.value=_.value.filter((c,i,g)=>g.indexOf(c)===i),K()}),X()};return ie(async()=>{H()}),(l,t)=>{const r=Z,s=ee,_=te,c=se,i=ae,g=oe,h=le;return v(),x("div",null,[n(h,null,{left:o(()=>[n(r,{modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=u=>A.value=u),icon:"lucide:search",shape:"curved",placeholder:"Search SDA...",classes:{wrapper:"w-full sm:w-auto"}},null,8,["modelValue"])]),right:o(()=>[n(s,{shape:"curved",class:"w-full sm:w-28",to:"/"},{default:o(()=>[k("Dashboard")]),_:1})]),default:o(()=>[e("div",null,[ue(E)===!0?(v(),x("div",_e,[n(_,{title:"Wait for a while...",subtitle:"Looks like you do not have any SDA. If you have SDAs then it will be shown here in few time. Till then try other things."},{image:o(()=>[ge,he]),_:1})])):(v(),x("div",ve,[n(c,{tag:"h3",size:"md",weight:"medium",class:"text-muted-800 dark:text-muted-100"},{default:o(()=>[k(" SDA ")]),_:1}),ye,e("div",we,[n(F,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:o(()=>[(v(!0),x(L,null,C(m.value,(u,d)=>(v(),V(g,{key:d,shape:"curved",class:"group p-3"},{default:o(()=>[n(i,{to:`${"/sda/details/"+d}`},{default:o(()=>[e("div",xe,[e("img",{src:u.nft.image,class:"h-40 w-full rounded-lg object-cover"},null,8,ke)]),e("div",null,[e("div",be,[n(c,{tag:"h3",size:"md",weight:"medium",lead:"snug",class:"line-clamp-2 text-gray-800 dark:text-gray-100"},{default:o(()=>[k(y(u.nft.name),1)]),_:2},1024),e("div",Ne,[e("p",null,y(u.nftAmount),1)])]),e("div",Ae,[e("div",Ie,[e("h4",Se,y(u.nft.description),1)])])])]),_:2},1032,["to"]),n(i,{to:`${"/sda/"+d}`},{default:o(()=>[n(s,{color:"primary",class:"w-full"},{default:o(()=>[Ee]),_:1})]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),Te,n(c,{tag:"h3",size:"md",weight:"medium",class:"text-muted-800 dark:text-muted-100"},{default:o(()=>[k(" Events ")]),_:1}),qe,Oe,e("div",$e,[n(F,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:o(()=>[(v(!0),x(L,null,C(l.Event,(u,d)=>(v(),V(g,{key:d,shape:"curved",class:"group p-3"},{default:o(()=>[n(i,{to:`${"/sda/details/"+d}`},{default:o(()=>[e("div",je,[e("img",{src:u.nft.image,class:"h-40 w-full rounded-lg object-cover"},null,8,Be)]),e("div",null,[e("div",De,[n(c,{tag:"h3",size:"md",weight:"medium",lead:"snug",class:"line-clamp-2 text-gray-800 dark:text-gray-100"},{default:o(()=>[k(y(u.nft.name),1)]),_:2},1024),e("div",Pe,[e("p",null,y(u.nftAmount),1)])]),e("div",Fe,[e("div",Le,[e("h4",Ce,y(u.nft.description),1)])])])]),_:2},1032,["to"]),n(i,{to:`${"/sda/"+d}`},{default:o(()=>[n(s,{color:"primary",class:"w-full"},{default:o(()=>[Ve]),_:1})]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})])]))])]),_:1})])}}});export{ot as default};
