import{_ as ue}from"./BaseHeading.vue.44d4da62.js";import{_ as me}from"./BaseParagraph.vue.5b1eff3d.js";import{_ as pe}from"./BaseInput.vue.8442e93d.js";import{_ as fe}from"./BaseButton.bd8b5291.js";import{_ as he}from"./BaseButtonClose.vue.1857c792.js";import{_ as we}from"./TairoModal.vue.e4e53cdb.js";import{d as ge,r as n,c as S,z as _e,y as ve,L as ye,o as be,a as xe,i as s,Q as U,b as c,w as u,j as A,e as f,t as Se,H as O}from"./entry.80a6c108.js";import{u as Ae}from"./fetch.a680d670.js";import{z as T,u as Te,F as I,t as Ee}from"./vee-validate.esm.68e6e3cc.js";import{C as j}from"./index.4e5993e3.js";import{L as Ne}from"./index.59421564.js";import"./buttons.461bdd2f.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./nuxt-link.1220d27b.js";import"./Icon.bdfa58d4.js";import"./index.00c662f8.js";import"./input-id.3e52058e.js";import"./use-outside-click.e91b2f1a.js";import"./transition.f5002c62.js";const ke={class:"bg-muted-100 dark:bg-muted-900 relative min-h-screen w-full overflow-hidden px-4"},Ce={class:"flex w-full items-center justify-center"},De={class:"relative mx-auto w-full max-w-2xl shadow-muted-400 shadow shadow-5xl rounded bg-muted-50 dark:bg-muted-700/70"},Oe={class:"me-auto ms-auto mt-4 w-full"},Ie={class:"text-center"},Pe={class:"px-8 py-4"},Be={class:"mb-4 space-y-4"},Re={class:"space-y-1"},Ve=s("span",null,"Max",-1),Le={class:"mb-2 pl-2"},Fe={class:"flex items-center justify-between"},He={class:"text-gray-400 text-sm"},Ue={class:"mb-6 flex items-center justify-center"},je={class:"px-3"},qe={class:"flex w-full items-center justify-between p-4 md:p-6"},ze=s("h3",{class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"}," Enter your Passcode to confirm ",-1),Me=s("div",{class:"p-4 md:p-6"},[s("div",{class:"mx-auto w-full max-w-xs text-center"})],-1),We={class:"p-4 md:p-6"},Je={class:"flex gap-x-2"},yt=ge({__name:"onboardwork",setup($e){const q=q(),m=m(),E=n(!1);function P(){E.value=!1}function z(){E.value=!0}const N=new Ne;var _=n(""),d=n(0),h=n("");n(!1);const B=n(!1);var v=n(0);n("");var g=n("");n("");var R=n("");n("");var y=n(""),k=n(""),C=n(""),D=n(""),b=n("");const V=S(()=>d.value.toFixed(2)),M=S(()=>ne.value.toFixed(2));function W(t){m.clearAll(),m.show({title:"Success",message:t,color:"success",icon:"ph:check",closable:!0})}function J(t){try{navigator.clipboard.writeText(t)}catch(e){console.error("Unable to copy text: ",e)}}function x(t){m.clearAll(),m.show({title:"Error",message:t,color:"danger",icon:"ph:user",closable:!0})}function $(t,e){R.value=j.AES.decrypt(t,e).toString(j.enc.Utf8),console.log("hash here",R.value)}const Q=async()=>(await Ae("https://api.coinbase.com/v2/prices/LTC-USD/buy","$EBRfNluOKm")).data;async function G(){console.log("This is sending"),await K(),await X(),await Y(),await Z(),d.value=0,h.value=""}async function K(){try{const t=localStorage.getItem("gen_wallet_Name"),e=localStorage.getItem("wallet_address"),r=new Headers;t&&(r.append("wallet",t),r.append("Content-Type","application/json"));const p=JSON.stringify({senderAddress:e,recipientAddress:h,amount:d}),o={method:"POST",headers:r,body:p,redirect:"follow"};console.log("sendHAsh: ",o),await fetch("https://liaas20240129020448.azurewebsites.net/api/Litecoin/Create-Raw-LTC-Transactions",o).then(a=>a.text()).then(a=>{const l=JSON.parse(a);console.log("wetin: ",l),l.successful?(k=l.data,console.log("sendHAsh: ",k)):(console.log(l.message),x(l.message))}).catch(a=>console.error(a))}catch{}}async function X(){const t=localStorage.getItem("gen_wallet_Name"),e=localStorage.getItem("wallet_address"),r=localStorage.getItem("encryptedData"),p=$(r,g);try{const o=new Headers;t&&o.append("wallet",t),o.append("encryptedPassphrase",p),console.log("dem things",t,p);const a={method:"GET",headers:o,redirect:"follow"};await fetch(`https://liaas20240129020448.azurewebsites.net/api/Address/get-address-privatekey?Address=${e}`,a).then(l=>l.text()).then(l=>{console.log("resp: ",l);const w=JSON.parse(l);console.log("privatekey: ",w),w.successful?(C=w.data,console.log("privatekey: ",C)):(console.log(w.message),x(w.message))}).catch(l=>console.error(l))}catch{}}async function Y(){try{const t=localStorage.getItem("gen_wallet_Name"),e=new Headers;t&&e.append("wallet",t),e.append("Content-Type","application/json");const r=JSON.stringify({addressPrivateKey:C,txhash:k});await fetch("https://liaas20240129020448.azurewebsites.net/api/Litecoin/sign-Raw-LTC-Transactions",{method:"POST",headers:e,body:r,redirect:"follow"}).then(o=>o.text()).then(o=>{const a=JSON.parse(o);a.successful?(D=a.data,console.log("signedHash: ",D)):(console.log(a.message),x(a.message))}).catch(o=>console.error(o))}catch{}}async function Z(){try{const t=document.getElementsByClassName("loader"),e=localStorage.getItem("gen_wallet_Name"),r=new Headers;e&&r.append("wallet",e),r.append("Content-Type","application/json");const p=JSON.stringify({signedTxHash:D});await fetch("https://liaas20240129020448.azurewebsites.net/api/Litecoin/broadcast-transactions",{method:"POST",headers:r,body:p,redirect:"follow"}).then(a=>a.text()).then(a=>{const l=JSON.parse(a);l.successful?(b=l.data,console.log("broadcast: ",b),J(b.value),W("Copied Data"+b+"success")):(console.log(l.message),x(l.message))}).catch(a=>console.error(a))}catch(t){console.error(t)}}const L={EMAIL_REQUIRED:"A valid email is required",PASSWORD_REQUIRED:"A password is required"},ee=T.object({email:T.string().email(L.EMAIL_REQUIRED),password:T.string().min(1,L.PASSWORD_REQUIRED),trustDevice:T.boolean()}),te=Ee(ee),ae=S(()=>({email:"",password:"",trustDevice:!1})),{handleSubmit:se,isSubmitting:Qe,setFieldError:oe,meta:Ge,values:Ke,errors:Xe,resetForm:Ye,setFieldValue:Ze,setErrors:et}=Te({validationSchema:te,initialValues:ae}),F=se(async t=>{console.log("auth-success",t);try{await new Promise((e,r)=>{t.password!=="password"&&setTimeout(()=>r(new Error("Fake backend validation error")),2e3),setTimeout(e,4e3)}),m.clearAll(),m.show({title:"Success",message:"Welcome back!",color:"success",icon:"ph:user-circle-fill",closable:!0})}catch(e){e.message==="Fake backend validation error"&&oe("password",'Invalid credentials (use "password")');return}window.location.href="/dashboards"});function le(){if(y.value=localStorage.getItem("wallet_address")||"",console.log("wallet address is here value: ",y.value),y.value==null||y.value=="")window.location.href="/onboarding";else{const e=new URLSearchParams(window.location.search).get("address");e&&(h.value=e)}}const ne=S({get(){return d.value*parseFloat(v.value)},set(t){}});_e([d,v],()=>{});async function re(){const t=localStorage.getItem("gen_wallet_Name");await N.walletBalance(t).then(e=>{e.successful?(d.value=e.data,console.log("amounting object",d)):(m.clearAll(),m.show({title:"Error",message:e.message,color:"danger",icon:"user-circle-fill",closable:!0}))})}async function ce(){await re(),console.log("amounting here",d);const t=d.value-.01;n(0),d.value>=.01?(d.value=t,console.log("inside",d.value),console.log("outside",t)):(d.value=0,m.clearAll(),m.show({title:"Insufficient balance",message:"Not enough amount",color:"danger",icon:"ph:check",closable:!0}))}async function ie(){try{const t=localStorage.getItem("gen_wallet_Name");await N.walletDetails(t).then(e=>{e.message.includes("Requested wallet does not exist or is not loaded")?N.loadWallet(t).then(r=>{console.log("this is the response of a loaded wallet ",r.message),H()}):H()}).catch(()=>{console.log("catch error")})}catch(t){console.log(t)}}async function H(){le();const e=(await Q()).value;return e&&(v.value=e.data.amount),v.value}return ve(async()=>{await ie()}),(t,e)=>{const r=ue,p=me,o=pe,a=fe,l=ye("BaseButtonGroup"),w=he,de=we;return be(),xe("div",ke,[s("div",Ce,[s("div",De,[s("div",Oe,[s("form",{method:"POST",action:"",onSubmit:e[6]||(e[6]=U((...i)=>f(F)&&f(F)(...i),["prevent"])),class:"me-auto ms-auto mt-4 w-full max-w-md",novalidate:""},[s("div",Ie,[c(r,{as:"h2",size:"3xl",weight:"medium"},{default:u(()=>[A(" Send Funds ")]),_:1}),c(p,{size:"sm",class:"text-muted-400 mb-6"},{default:u(()=>[A(" Enter LTC amount you want to send! ")]),_:1})]),s("div",Pe,[s("div",Be,[s("div",Re,[c(f(I),{name:"Amount"},{default:u(()=>[c(l,{class:"flex items-center"},{default:u(()=>[c(o,{type:"number",label:"Amount",placeholder:"Amount",classes:{input:"h-12",wrapper:"w-96"},icon:"cryptocurrency:ltc",modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=i=>V.value=i)},null,8,["modelValue"]),c(a,{color:"muted",class:"mt-6 h-12",onClick:e[1]||(e[1]=i=>ce())},{default:u(()=>[Ve]),_:1})]),_:1})]),_:1}),s("div",Le,[s("div",Fe,[s("span",He,Se(M.value)+" in USD",1)])])]),c(f(I),{name:"WalletAddress"},{default:u(()=>[c(o,{ref:"addressInput",modelValue:f(h),"onUpdate:modelValue":e[2]||(e[2]=i=>O(h)?h.value=i:h=i),type:"text",label:"Wallet Address",placeholder:"Wallet Address",classes:{input:"h-12"},icon:"solar:copy-bold"},null,8,["modelValue"])]),_:1}),c(f(I),{name:"EnterComment"},{default:u(()=>[c(o,{modelValue:f(_),"onUpdate:modelValue":e[3]||(e[3]=i=>O(_)?_.value=i:_=i),type:"text",label:"Enter Comment",placeholder:"Enter Comment",classes:{input:"h-12"}},null,8,["modelValue"])]),_:1})]),s("div",Ue,[c(a,{disabled:B.value,loading:B.value,type:"submit",color:"primary",class:"!h-12 w-36",onClick:z},{default:u(()=>[A(" Send ")]),_:1},8,["disabled","loading"])]),c(de,{open:E.value,size:"sm",onClose:P},{header:u(()=>[s("div",je,[s("div",qe,[ze,c(w,{onClick:P})]),c(o,{label:"Passcode",modelValue:f(g),"onUpdate:modelValue":e[4]||(e[4]=i=>O(g)?g.value=i:g=i),type:"password",class:"",icon:"uil:padlock",shape:"curved",classes:{wrapper:"w-full",input:"!h-12 !ps-12",icon:"!h-12 !w-12"}},null,8,["modelValue"])])]),footer:u(()=>[s("div",We,[s("div",Je,[c(a,{color:"primary",flavor:"solid",onClick:e[5]||(e[5]=U(i=>G(),["prevent"]))},{default:u(()=>[A(" Send ")]),_:1})])])]),default:u(()=>[Me]),_:1},8,["open"])])],32)])])])])}}});export{yt as default};
