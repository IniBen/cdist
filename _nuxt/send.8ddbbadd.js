import{_ as de}from"./BaseHeading.vue.9a9fc5ec.js";import{_ as ue}from"./BaseParagraph.vue.cbb83cc1.js";import{_ as me}from"./BaseInput.vue.4a65707e.js";import{_ as pe}from"./BaseButton.e02d6ce0.js";import{_ as fe}from"./BaseButtonClose.vue.f3ce412e.js";import{_ as ge}from"./TairoModal.vue.a2dce0a7.js";import{d as he,Q as we,r as n,c as x,z as _e,y as ve,L as ye,o as be,a as xe,i as a,U as H,b as c,w as m,j as S,e as f,t as Se,H as I}from"./entry.63b4628a.js";import{u as Ae}from"./toaster.31e779e7.js";import{z as A,t as Te}from"./vee-validate-zod.esm.ff9df3d7.js";import{C as U}from"./index.4e5993e3.js";import{u as Ee,F as P}from"./vee-validate.esm.4c3a3e60.js";import{L as Ce}from"./index.59421564.js";import"./buttons.0840fcf5.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./nuxt-link.89ea7923.js";import"./Icon.ee796011.js";import"./index.7d7b5c60.js";import"./input-id.865b9bb7.js";import"./use-outside-click.db16dac2.js";import"./transition.32645775.js";const Ne={class:"bg-muted-100 dark:bg-muted-900 relative min-h-screen w-full overflow-hidden px-4"},De={class:"flex w-full items-center justify-center"},ke={class:"relative mx-auto w-full max-w-2xl shadow-muted-400 shadow shadow-5xl rounded bg-muted-50 dark:bg-muted-700/70"},Oe={class:"me-auto ms-auto mt-4 w-full"},Ie={class:"text-center"},Pe={class:"px-8 py-4"},Re={class:"mb-4 space-y-4"},Ve={class:"space-y-1"},Be=a("span",null,"Max",-1),Le={class:"mb-2 pl-2"},Fe={class:"flex items-center justify-between"},He={class:"text-gray-400 text-sm"},Ue={class:"mb-6 flex items-center justify-center"},je={class:"px-3"},qe={class:"flex w-full items-center justify-between p-4 md:p-6"},ze=a("h3",{class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"}," Enter your Passcode to confirm ",-1),Me=a("div",{class:"p-4 md:p-6"},[a("div",{class:"mx-auto w-full max-w-xs text-center"})],-1),We={class:"p-4 md:p-6"},Je={class:"flex gap-x-2"},bt=he({__name:"send",setup(Qe){we();const p=Ae(),T=n(!1);function E(){T.value=!1}function j(){T.value=!0}const C=new Ce;var w=n(""),d=n(0),g=n("");n(!1);const R=n(!1);var _=n("");n("");var h=n("");n("");var N=n("");n("");var v=n(""),D=n(""),k=n(""),O=n(""),y=n("");const V=x(()=>d.value.toFixed(2)),q=x(()=>oe.value.toFixed(2));function z(t){p.clearAll(),p.show({title:"Success",message:t,color:"success",icon:"ph:check",closable:!0})}function M(t){try{navigator.clipboard.writeText(t)}catch(e){console.error("Unable to copy text: ",e)}}function b(t){p.clearAll(),p.show({title:"Error",message:t,color:"danger",icon:"ph:user",closable:!0})}function W(t,e){N.value=U.AES.decrypt(t,e).toString(U.enc.Utf8),console.log("pin",e),console.log("encrypted",t)}const J=async()=>(await fetch("https://api.coinbase.com/v2/prices/LTC-USD/buy")).data;async function Q(){console.log("This is sending"),await $(),await G(),await K(),await X()}async function $(){const t=new Headers,e=localStorage.getItem("gen_wallet_Name"),l=localStorage.getItem("wallet_address");if(e&&l){t.append("wallet",e),t.append("Content-Type","application/json");const u=JSON.stringify({senderAddress:l,recipientAddress:g.value,amount:d.value});console.log("since morning",e,u);const r={method:"POST",headers:t,body:u};console.log("since afternoon",r),fetch("https://liaas20240129020448.azurewebsites.net/api/Litecoin/Create-Raw-LTC-Transactions",r).then(s=>s.text()).then(s=>{d.value=0,g.value="",E();const o=JSON.parse(s);console.log("wetin: ",o),o.successful?(D=o.data,console.log("sendHAsh: ",D)):(console.log(o.message),b(o.message))}).catch(s=>console.error(s)).catch(s=>console.error(s))}}async function G(){const t=localStorage.getItem("gen_wallet_Name"),e=localStorage.getItem("wallet_address"),l=localStorage.getItem("encrytedDataPhrase");W(l,h.value);try{const u=new Headers;t&&u.append("wallet",t),u.append("encryptedPassphrase",N.value),console.log("dem things",t,N.value);const r={method:"GET",headers:u};await fetch(`https://liaas20240129020448.azurewebsites.net/api/Address/get-address-privatekey?Address=${e}`,r).then(s=>s.text()).then(s=>{console.log("resp: ",s);const o=JSON.parse(s);console.log("privatekey: ",o),o.successful?(k=o.data,console.log("privatekey: ",k)):(console.log(o.message),b(o.message))}).catch(s=>console.error(s))}catch{}}async function K(){try{const t=localStorage.getItem("gen_wallet_Name"),e=new Headers;t&&e.append("wallet",t),e.append("Content-Type","application/json");const l=JSON.stringify({addressPrivateKey:k,txhash:D});await fetch("https://liaas20240129020448.azurewebsites.net/api/Litecoin/sign-Raw-LTC-Transactions",{method:"POST",headers:e,body:l}).then(r=>r.text()).then(r=>{const s=JSON.parse(r);s.successful?(O=s.data,console.log("signedHash: ",O)):(console.log(s.message),b(s.message))}).catch(r=>console.error(r))}catch{}}async function X(){try{const t=document.getElementsByClassName("loader"),e=localStorage.getItem("gen_wallet_Name"),l=new Headers;e&&l.append("wallet",e),l.append("Content-Type","application/json");const u=JSON.stringify({signedTxHash:O});await fetch("https://liaas20240129020448.azurewebsites.net/api/Litecoin/broadcast-transactions",{method:"POST",headers:l,body:u}).then(s=>s.text()).then(s=>{const o=JSON.parse(s);o.successful?(y=o.data,console.log("broadcast: ",y),M(y.value),z("Copied Data"+y+"success")):(console.log(o.message),b(o.message))}).catch(s=>console.error(s))}catch(t){console.error(t)}}const B={EMAIL_REQUIRED:"A valid email is required",PASSWORD_REQUIRED:"A password is required"},Y=A.object({email:A.string().email(B.EMAIL_REQUIRED),password:A.string().min(1,B.PASSWORD_REQUIRED),trustDevice:A.boolean()}),Z=Te(Y),ee=x(()=>({email:"",password:"",trustDevice:!1})),{handleSubmit:te,isSubmitting:$e,setFieldError:se,meta:Ge,values:Ke,errors:Xe,resetForm:Ye,setFieldValue:Ze,setErrors:et}=Ee({validationSchema:Z,initialValues:ee}),L=te(async t=>{console.log("auth-success",t);try{await new Promise((e,l)=>{t.password!=="password"&&setTimeout(()=>l(new Error("Fake backend validation error")),2e3),setTimeout(e,4e3)}),p.clearAll(),p.show({title:"Success",message:"Welcome back!",color:"success",icon:"ph:user-circle-fill",closable:!0})}catch(e){e.message==="Fake backend validation error"&&se("password",'Invalid credentials (use "password")');return}window.location.href="/dashboards"});function ae(){if(v.value=localStorage.getItem("wallet_address")||"",console.log("wallet address is here value: ",v.value),v.value==null||v.value=="")window.location.href="/onboarding";else{const e=new URLSearchParams(window.location.search).get("address");e&&(g.value=e)}}const oe=x(()=>d.value*parseFloat(_.value));_e([d,_],()=>{});async function ne(){const t=localStorage.getItem("gen_wallet_Name");await C.walletBalance(t).then(e=>{e.successful?(d.value=e.data,console.log("amounting object",d)):(p.clearAll(),p.show({title:"Error",message:e.message,color:"danger",icon:"user-circle-fill",closable:!0}))})}async function le(){await ne(),console.log("amounting here",d);const t=d.value-.01;n(0),d.value>=.01?(d.value=t,console.log("inside",d.value),console.log("outside",t)):(d.value=0,p.clearAll(),p.show({title:"Insufficient balance",message:"Not enough amount",color:"danger",icon:"ph:check",closable:!0}))}async function re(){try{const t=localStorage.getItem("gen_wallet_Name");await C.walletDetails(t).then(e=>{e.message.includes("Requested wallet does not exist or is not loaded")?C.loadWallet(t).then(l=>{console.log("this is the response of a loaded wallet ",l.message),F()}):F()}).catch(()=>{console.log("catch error")})}catch(t){console.log(t)}}async function F(){ae();const e=(await J()).value;return e&&(_.value=e.data.amount),_.value}return ve(async()=>{await re()}),(t,e)=>{const l=de,u=ue,r=me,s=pe,o=ye("BaseButtonGroup"),ce=fe,ie=ge;return be(),xe("div",Ne,[a("div",De,[a("div",ke,[a("div",Oe,[a("form",{method:"POST",action:"",onSubmit:e[6]||(e[6]=H((...i)=>f(L)&&f(L)(...i),["prevent"])),class:"me-auto ms-auto mt-4 w-full max-w-md",novalidate:""},[a("div",Ie,[c(l,{as:"h2",size:"3xl",weight:"medium"},{default:m(()=>[S(" Send Funds ")]),_:1}),c(u,{size:"sm",class:"text-muted-400 mb-6"},{default:m(()=>[S(" Enter LTC amount you want to send! ")]),_:1})]),a("div",Pe,[a("div",Re,[a("div",Ve,[c(f(P),{name:"Amount"},{default:m(()=>[c(o,{class:"flex items-center"},{default:m(()=>[c(r,{type:"number",label:"Amount",placeholder:"Amount",classes:{input:"h-12",wrapper:"w-96"},icon:"cryptocurrency:ltc",modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=i=>V.value=i)},null,8,["modelValue"]),c(s,{color:"muted",class:"mt-6 h-12",onClick:e[1]||(e[1]=i=>le())},{default:m(()=>[Be]),_:1})]),_:1})]),_:1}),a("div",Le,[a("div",Fe,[a("span",He,Se(q.value)+" in USD",1)])])]),c(f(P),{name:"WalletAddress"},{default:m(()=>[c(r,{ref:"addressInput",modelValue:f(g),"onUpdate:modelValue":e[2]||(e[2]=i=>I(g)?g.value=i:g=i),type:"text",label:"Wallet Address",placeholder:"Wallet Address",classes:{input:"h-12"},icon:"solar:copy-bold"},null,8,["modelValue"])]),_:1}),c(f(P),{name:"EnterComment"},{default:m(()=>[c(r,{modelValue:f(w),"onUpdate:modelValue":e[3]||(e[3]=i=>I(w)?w.value=i:w=i),type:"text",label:"Enter Comment",placeholder:"Enter Comment",classes:{input:"h-12"}},null,8,["modelValue"])]),_:1})]),a("div",Ue,[c(s,{disabled:R.value,loading:R.value,type:"submit",color:"primary",class:"!h-12 w-36",onClick:j},{default:m(()=>[S(" Send ")]),_:1},8,["disabled","loading"])]),c(ie,{open:T.value,size:"sm",onClose:E},{header:m(()=>[a("div",je,[a("div",qe,[ze,c(ce,{onClick:E})]),c(r,{label:"Passcode",modelValue:f(h),"onUpdate:modelValue":e[4]||(e[4]=i=>I(h)?h.value=i:h=i),type:"password",class:"",icon:"uil:padlock",shape:"curved",classes:{wrapper:"w-full",input:"!h-12 !ps-12",icon:"!h-12 !w-12"}},null,8,["modelValue"])])]),footer:m(()=>[a("div",We,[a("div",Je,[c(s,{color:"primary",flavor:"solid",onClick:e[5]||(e[5]=H(i=>Q(),["prevent"]))},{default:m(()=>[S(" Send ")]),_:1})])])]),default:m(()=>[Me]),_:1},8,["open"])])],32)])])])])}}});export{bt as default};
