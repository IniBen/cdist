import{_ as Q}from"./BaseHeading.vue.367aa72a.js";import{_ as H}from"./BaseParagraph.vue.cd94dabc.js";import{_ as $}from"./BaseInput.vue.ac862dc4.js";import{_ as J}from"./BaseButton.2b54a2c4.js";import{_ as Y}from"./BaseButtonClose.vue.2b3e83ce.js";import{_ as K}from"./TairoModal.vue.02bd1e2c.js";import{d as G,r as n,c as X,P as Z,y as ee,o as te,a as oe,i as o,Q as V,b as r,w as i,j as h,t as ae,e as l,H as A}from"./entry.4f1f4e90.js";import{u as se}from"./toaster.29c7b5e4.js";import{z as y,u as le,F as T,t as ne}from"./vee-validate.esm.6dd2f5e9.js";import{L as re}from"./index.92423b2e.js";import"./buttons.3ff0afbe.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./nuxt-link.8273492f.js";import"./Icon.cd622b41.js";import"./index.a63dc9f9.js";import"./input-id.477f8fd9.js";import"./use-outside-click.eb7af496.js";import"./transition.d9dd8cdc.js";const ie={class:"bg-muted-100 dark:bg-muted-900 relative min-h-screen w-full overflow-hidden p-6"},ce={class:"flex w-full items-center justify-center"},de={class:"relative mx-auto w-full max-w-2xl shadow-muted-400 shadow shadow-5xl rounded bg-muted-50 dark:bg-muted-700/70"},me={class:"me-auto ms-auto mt-4 w-full"},ue={class:"text-center"},pe={class:"text-purple-400 font-bold"},fe={class:"px-8 py-4"},_e={class:"mb-4 space-y-4"},ve={class:"mb-6 flex items-center justify-center"},ge={class:"px-3"},we={class:"flex w-full items-center justify-between p-4 md:p-6"},he=o("h3",{class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"}," Enter your Passcode to confirm ",-1),be=o("div",{class:"p-4 md:p-6"},[o("div",{class:"mx-auto w-full max-w-xs text-center"})],-1),ye={class:"p-4 md:p-6"},xe={class:"flex gap-x-2"},Je=G({__name:"sendtoken",setup(Se){const E=[{id:1,name:"Litecoin",text:"LPsvd8n76fGmHZVYNkM7cj2idAKJQg4KhU",media:"/img/illustrations/tokens/litecoin-ltc-logo.svg",balance:"30.45",publicadd:"02e57cc430dd0ebada066cfa57bac138af2e42406c3d8c77579ac453a683a0f606"},{id:2,name:"Bitcoin",text:"18FEpj7sfYx2aAjL9uwP8VL29VUn8FMPmA",media:"/img/illustrations/tokens/bitocoin-btc.svg",balance:"2",publicadd:"03bf7b204a226c20ea1f06fd30a3bb8fb2cc9d06c5e662f3dc58d4660e543c2b64"},{id:3,name:"Binance USD",text:"bnb15hggjjda3pwdqqd76pnrnpddpaqx98dkapryxt",media:"/img/illustrations/tokens/binance-usd.svg",balance:"5.45"}];function P(t){try{navigator.clipboard.writeText(t)}catch(e){console.error("Unable to copy text: ",e)}}n(E[0]);const D={EMAIL_REQUIRED:"A valid email is required",PASSWORD_REQUIRED:"A password is required"},B=y.object({email:y.string().email(D.EMAIL_REQUIRED),password:y.string().min(1,D.PASSWORD_REQUIRED),trustDevice:y.boolean()}),R=ne(B),j=X(()=>({email:"",password:"",trustDevice:!1})),{handleSubmit:N,isSubmitting:U,setFieldError:F,meta:ke,values:Ve,errors:Ae,resetForm:De,setFieldValue:Ie,setErrors:Te}=le({validationSchema:R,initialValues:j});Z();const v=n(!1),u=se();var p=n(),f=n(""),g=n("");n(!1),n("");var x=n(""),S=n(!1),w=n(""),k=n("");function b(){S.value=!1}function M(){S.value=!0}const O=new re;function L(t){u.clearAll(),u.show({title:"Sent! Your Transaction ID has been copied Automatically",message:t,color:"success",icon:"ph:check",closable:!0})}function C(t){u.clearAll(),u.show({title:"Error",message:t,color:"danger",icon:"ph:user",closable:!0})}async function q(t,e){var c=new Headers;c.append("Content-Type","application/json");const d=JSON.stringify({encryptedData:t,key:e});console.log("raw war",d),await fetch("https://cyto-node.azurewebsites.net/encryption/decrypt",{method:"POST",headers:c,body:d}).then(a=>a.text()).then(a=>{const _=JSON.parse(a);return console.log("grace",_),console.log("encryptedData.value",_.decryptedData),x.value=_.decryptedData,_.decryptedData}).catch(a=>console.error(a))}async function W(){v.value=!0;const t=localStorage.getItem("wallet_address"),e=localStorage.getItem("gen_wallet_Name"),c=localStorage.getItem("encrytedDataPhrase");g.value=localStorage.getItem("property_id");const d=f.value,m=p.value;await q(c,w.value),console.log("ecrypt --->",x.value),console.log("wallet --->",g.value),console.log("wallet --->",t),console.log("wallet --->",d),console.log("wallet --->",e),console.log("wallet --->",m),O.sendToken(e,x.value,m,g.value,t,d).then(a=>{a.successful?(v.value=!1,b(),L(a.data),P(a.data),p.value=0,f.value="",localStorage.removeItem("property_id"),localStorage.removeItem("tokenName"),window.location.href="/tokens"):(v.value=!1,b(),C(a.message))})}ee(()=>{const t=localStorage.getItem("property_id"),e=localStorage.getItem("tokenName");g.value=t,k.value=e,console.log(g.value,k.value)});const I=N(async t=>{console.log("auth-success",t);try{await new Promise((e,c)=>{t.password!=="password"&&setTimeout(()=>c(new Error("Fake backend validation error")),2e3),setTimeout(e,4e3)}),u.clearAll(),u.show({title:"Success",message:"Welcome back!",color:"success",icon:"ph:user-circle-fill",closable:!0})}catch(e){e.message==="Fake backend validation error"&&F("password",'Invalid credentials (use "password")');return}window.location.href="/dashboards"});return(t,e)=>{const c=Q,d=H,m=$,a=J,_=Y,z=K;return te(),oe("div",ie,[o("div",ce,[o("div",de,[o("div",me,[o("form",{method:"POST",action:"",onSubmit:e[5]||(e[5]=V((...s)=>l(I)&&l(I)(...s),["prevent"])),class:"me-auto ms-auto mt-4 w-full max-w-md",novalidate:""},[o("div",ue,[r(c,{as:"h2",size:"3xl",weight:"medium"},{default:i(()=>[h(" Send Tokens ")]),_:1}),r(d,{size:"sm",class:"text-muted-400 mb-6"},{default:i(()=>[h(" Enter "),o("span",pe,ae(l(k)),1),h(" amount you want to send and the reciever's wallet address ")]),_:1})]),o("div",fe,[o("div",_e,[r(l(T),{name:"Amount"},{default:i(()=>[r(m,{modelValue:l(p),"onUpdate:modelValue":e[0]||(e[0]=s=>A(p)?p.value=s:p=s),type:"text",label:"Amount",placeholder:"Amount",classes:{input:"h-12",icon:"flex items-center"},icon:"iconoir:coins"},null,8,["modelValue"])]),_:1}),r(l(T),{name:"WalletAddress"},{default:i(()=>[r(m,{modelValue:l(f),"onUpdate:modelValue":e[1]||(e[1]=s=>A(f)?f.value=s:f=s),type:"text",label:"Wallet Address",placeholder:"Wallet Address",classes:{input:"h-12",icon:"flex items-center"},icon:"solar:copy-bold"},null,8,["modelValue"])]),_:1})]),o("div",ve,[r(a,{onClick:e[2]||(e[2]=V(s=>M(),["prevent"])),disabled:l(U),loading:l(v),type:"submit",color:"primary",class:"!h-12 w-36"},{default:i(()=>[h(" Send Tokens ")]),_:1},8,["disabled","loading"])]),r(z,{open:l(S),size:"sm",onClose:b},{header:i(()=>[o("div",ge,[o("div",we,[he,r(_,{onClick:b})]),r(m,{label:"Passcode",modelValue:l(w),"onUpdate:modelValue":e[3]||(e[3]=s=>A(w)?w.value=s:w=s),type:"password",class:"",icon:"uil:padlock",shape:"curved",classes:{wrapper:"w-full",input:"!h-12 !ps-12",icon:"!h-12 !w-12"}},null,8,["modelValue"])])]),footer:i(()=>[o("div",ye,[o("div",xe,[r(a,{loading:l(v),color:"primary",flavor:"solid",onClick:e[4]||(e[4]=V(s=>W(),["prevent"]))},{default:i(()=>[h(" Send ")]),_:1},8,["loading"])])])]),default:i(()=>[be]),_:1},8,["open"])])],32)])])])])}}});export{Je as default};
